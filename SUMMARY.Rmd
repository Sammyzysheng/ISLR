```{r echo=FALSE, comment=NA, indent=""}
library(rvest)

knitr::knit_hooks$set(
  output = function(x, options) {
    paste0(x)
    }
  )

library(stringr)

outline <- '
Chapter, Title
1,
2,
3, Linear Regression
4, Classification
5, Resampling Methods
6,
7, Moving Beyond Linearity
8, Tree-Based Methods
9,
10, Unsupervised Learning
'

df <- read.csv(textConnection(outline), header=TRUE)

add_chapter <- function(row) {
  chapter = str_trim(row['Chapter'])
  title = str_trim(row['Title'])
  
  add_chapter_content <- function(chapter, label, filename) {
    file_path = sprintf("chapter%s/%s", chapter, filename)
    if (file.exists(file_path))
      cat(sprintf("    * [%s](%s)\n", label, file_path))
  }
  
  cat(sprintf("* [Chapter %s. %s](chapter%s/index.md)\n", chapter, title, chapter))
  add_chapter_content(chapter, "Lab", "lab.md")
  add_chapter_content(chapter, "Solutions", "solutions.md")
}

invisible(apply(df[,c('Chapter', 'Title')], 1, add_chapter))
```

